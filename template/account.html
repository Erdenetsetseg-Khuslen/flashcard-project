<!DOCTYPE html>
<html>
<head>
    <title>My Account</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'flashcards/css/account.css' %}">
</head>
<body>

<h1 style="text-align:center;">My Account</h1>

<div class="account-container">

    <div class="profile-card">
        <img src="{{ user.profile.avatar.url }}" class="avatar">
        <h3>{{ user.username }}</h3>
        <p>{{ user.email }}</p>
        <a href="{% url 'edit_profile' %}" class="btn">Edit Profile</a>
    </div>

    <div class="content">
        <h2>‚≠ê Saved Kanji</h2>

{% regroup saved_kanji by kanji.level as level_list %}

<div class="saved-levels">
{% for group in level_list %}
    <div class="level-section">
        <h3 class="level-title" onclick="toggleLevel(this)">
        {{ group.grouper }} ({{ group.list|length }})
    </h3>

        <div class="kanji-grid level-content">
            {% for item in group.list %}
                <div class="saved-card" onclick="flip(this)">
                    <div class="inner">
                        <div class="front">
                            {{ item.kanji.character }}
                        </div>
                        <div class="back">
                            <div>{{ item.kanji.reading }}</div>
                            <small>{{ item.kanji.meaning }}</small>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% empty %}
    <p>No saved kanji yet.</p>
{% endfor %}
</div>

        <h2>Welcome back üëã</h2>
        <p>
            Here you will see your saved kanji, learning progress,
            and flashcard statistics.
        </p>

        <a href="{% url 'home' %}">‚Üê Back to Home</a>
    </div>

</div>

<script>
function flip(card) {
    card.classList.toggle("flipped");
}

function toggleLevel(title) {
    const content = title.nextElementSibling;
    content.style.display =
        content.style.display === "none" || content.style.display === ""
            ? "grid"
            : "none";
}
</script>

</body>
</html>
